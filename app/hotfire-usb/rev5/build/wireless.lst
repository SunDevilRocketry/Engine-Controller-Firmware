ARM GAS  /tmp/ccPyVOQq.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"wireless.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "../../../mod/wireless/wireless.c"
  19              		.section	.text.rf_xbee_transmit_byte,"ax",%progbits
  20              		.align	1
  21              		.global	rf_xbee_transmit_byte
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	rf_xbee_transmit_byte:
  27              	.LVL0:
  28              	.LFB333:
   1:../../../mod/wireless/wireless.c **** /*******************************************************************************
   2:../../../mod/wireless/wireless.c **** *
   3:../../../mod/wireless/wireless.c **** * FILE: 
   4:../../../mod/wireless/wireless.c **** * 		wireless.c
   5:../../../mod/wireless/wireless.c **** *
   6:../../../mod/wireless/wireless.c **** * DESCRIPTION: 
   7:../../../mod/wireless/wireless.c **** * 		Contains API functions to transmit data wirelessly using the XBee and 
   8:../../../mod/wireless/wireless.c **** *       and LoRa modules 
   9:../../../mod/wireless/wireless.c **** *
  10:../../../mod/wireless/wireless.c **** *******************************************************************************/
  11:../../../mod/wireless/wireless.c **** 
  12:../../../mod/wireless/wireless.c **** 
  13:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
  14:../../../mod/wireless/wireless.c ****  Standard Includes                                                                     
  15:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
  16:../../../mod/wireless/wireless.c **** #if defined( GROUND_STATION )
  17:../../../mod/wireless/wireless.c **** 	#include "sdr_pin_defines_A0005.h"
  18:../../../mod/wireless/wireless.c **** #elif defined( ENGINE_CONTROLLER )
  19:../../../mod/wireless/wireless.c **** 	#include "sdr_pin_defines_L0002.h"
  20:../../../mod/wireless/wireless.c **** #endif
  21:../../../mod/wireless/wireless.c **** 
  22:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
  23:../../../mod/wireless/wireless.c ****  Project Includes                                                                     
  24:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
  25:../../../mod/wireless/wireless.c **** #include "main.h"
  26:../../../mod/wireless/wireless.c **** #include "wireless.h"
  27:../../../mod/wireless/wireless.c **** 
  28:../../../mod/wireless/wireless.c **** 
  29:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
  30:../../../mod/wireless/wireless.c **** Global Variables                                                                  
ARM GAS  /tmp/ccPyVOQq.s 			page 2


  31:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
  32:../../../mod/wireless/wireless.c **** 
  33:../../../mod/wireless/wireless.c **** 
  34:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
  35:../../../mod/wireless/wireless.c ****  Procedures 
  36:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
  37:../../../mod/wireless/wireless.c **** 
  38:../../../mod/wireless/wireless.c **** 
  39:../../../mod/wireless/wireless.c **** /*******************************************************************************
  40:../../../mod/wireless/wireless.c **** *                                                                              *
  41:../../../mod/wireless/wireless.c **** * PROCEDURE:                                                                   *
  42:../../../mod/wireless/wireless.c **** * 		rf_xbee_transmit_byte                                                  *
  43:../../../mod/wireless/wireless.c **** *                                                                              *
  44:../../../mod/wireless/wireless.c **** * DESCRIPTION:                                                                 *
  45:../../../mod/wireless/wireless.c **** * 		transmits a byte wirelessly using the xbee module                      *
  46:../../../mod/wireless/wireless.c **** *                                                                              *
  47:../../../mod/wireless/wireless.c **** *******************************************************************************/
  48:../../../mod/wireless/wireless.c **** RF_STATUS rf_xbee_transmit_byte 
  49:../../../mod/wireless/wireless.c **** 	(
  50:../../../mod/wireless/wireless.c ****     uint8_t tx_byte	
  51:../../../mod/wireless/wireless.c **** 	)
  52:../../../mod/wireless/wireless.c **** {
  29              		.loc 1 52 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 52 1 is_stmt 0 view .LVU1
  34 0000 00B5     		push	{lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 4
  37              		.cfi_offset 14, -4
  38 0002 83B0     		sub	sp, sp, #12
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 16
  41 0004 8DF80700 		strb	r0, [sp, #7]
  53:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
  54:../../../mod/wireless/wireless.c ****  Local Variables
  55:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
  56:../../../mod/wireless/wireless.c **** HAL_StatusTypeDef hal_status;    /* Return codes from HAL */
  42              		.loc 1 56 1 is_stmt 1 view .LVU2
  57:../../../mod/wireless/wireless.c **** 
  58:../../../mod/wireless/wireless.c **** 
  59:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
  60:../../../mod/wireless/wireless.c ****  Initializations 
  61:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
  62:../../../mod/wireless/wireless.c **** hal_status = HAL_OK;
  43              		.loc 1 62 1 view .LVU3
  44              	.LVL1:
  63:../../../mod/wireless/wireless.c **** 
  64:../../../mod/wireless/wireless.c **** 
  65:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
  66:../../../mod/wireless/wireless.c ****  API Function Implementation 
  67:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
  68:../../../mod/wireless/wireless.c **** 
  69:../../../mod/wireless/wireless.c **** /* Wait for Clear to send signal */
  70:../../../mod/wireless/wireless.c **** #ifdef GROUND_STATION
  71:../../../mod/wireless/wireless.c **** while ( HAL_GPIO_ReadPin( XBEE_CTS_GPIO_PORT, XBEE_CTS_PIN ) != GPIO_PIN_RESET )
ARM GAS  /tmp/ccPyVOQq.s 			page 3


  72:../../../mod/wireless/wireless.c **** 	{
  73:../../../mod/wireless/wireless.c **** 	}
  74:../../../mod/wireless/wireless.c **** #endif
  75:../../../mod/wireless/wireless.c **** 
  76:../../../mod/wireless/wireless.c **** /* Transmit byte */
  77:../../../mod/wireless/wireless.c **** hal_status = HAL_UART_Transmit( &( XBEE_HUART )  ,
  45              		.loc 1 77 1 view .LVU4
  46              		.loc 1 77 14 is_stmt 0 view .LVU5
  47 0008 6423     		movs	r3, #100
  48 000a 0122     		movs	r2, #1
  49 000c 0DF10701 		add	r1, sp, #7
  50 0010 0348     		ldr	r0, .L4
  51              	.LVL2:
  52              		.loc 1 77 14 view .LVU6
  53 0012 FFF7FEFF 		bl	HAL_UART_Transmit
  54              	.LVL3:
  78:../../../mod/wireless/wireless.c ****                                 &tx_byte         , 
  79:../../../mod/wireless/wireless.c ****                                 sizeof( tx_byte ), 
  80:../../../mod/wireless/wireless.c ****                                 RF_POLL_TIMEOUT );
  81:../../../mod/wireless/wireless.c **** 
  82:../../../mod/wireless/wireless.c **** /* Return HAL status */
  83:../../../mod/wireless/wireless.c **** if ( hal_status != HAL_OK )
  55              		.loc 1 83 1 is_stmt 1 view .LVU7
  56              		.loc 1 83 4 is_stmt 0 view .LVU8
  57 0016 00B1     		cbz	r0, .L2
  84:../../../mod/wireless/wireless.c **** 	{
  85:../../../mod/wireless/wireless.c **** 	return RF_ERROR;
  58              		.loc 1 85 9 view .LVU9
  59 0018 0120     		movs	r0, #1
  60              	.L2:
  86:../../../mod/wireless/wireless.c **** 	}
  87:../../../mod/wireless/wireless.c **** else
  88:../../../mod/wireless/wireless.c **** 	{
  89:../../../mod/wireless/wireless.c **** 	return RF_OK;
  90:../../../mod/wireless/wireless.c **** 	}
  91:../../../mod/wireless/wireless.c **** 
  92:../../../mod/wireless/wireless.c **** } /* rf_xbee_transmit_byte */
  61              		.loc 1 92 1 view .LVU10
  62 001a 03B0     		add	sp, sp, #12
  63              	.LCFI2:
  64              		.cfi_def_cfa_offset 4
  65              		@ sp needed
  66 001c 5DF804FB 		ldr	pc, [sp], #4
  67              	.L5:
  68              		.align	2
  69              	.L4:
  70 0020 00000000 		.word	huart4
  71              		.cfi_endproc
  72              	.LFE333:
  74              		.section	.text.rf_xbee_transmit,"ax",%progbits
  75              		.align	1
  76              		.global	rf_xbee_transmit
  77              		.syntax unified
  78              		.thumb
  79              		.thumb_func
  81              	rf_xbee_transmit:
  82              	.LVL4:
ARM GAS  /tmp/ccPyVOQq.s 			page 4


  83              	.LFB334:
  93:../../../mod/wireless/wireless.c **** 
  94:../../../mod/wireless/wireless.c **** 
  95:../../../mod/wireless/wireless.c **** /*******************************************************************************
  96:../../../mod/wireless/wireless.c **** *                                                                              *
  97:../../../mod/wireless/wireless.c **** * PROCEDURE:                                                                   *
  98:../../../mod/wireless/wireless.c **** * 		rf_xbee_transmit                                                       *
  99:../../../mod/wireless/wireless.c **** *                                                                              *
 100:../../../mod/wireless/wireless.c **** * DESCRIPTION:                                                                 *
 101:../../../mod/wireless/wireless.c **** * 		transmits a buffer of bytes wirelessly using the xbee module           *
 102:../../../mod/wireless/wireless.c **** *                                                                              *
 103:../../../mod/wireless/wireless.c **** *******************************************************************************/
 104:../../../mod/wireless/wireless.c **** RF_STATUS rf_xbee_transmit
 105:../../../mod/wireless/wireless.c **** 	(
 106:../../../mod/wireless/wireless.c ****     void*  tx_buffer_ptr,   /* Pointer to buffer data    */
 107:../../../mod/wireless/wireless.c **** 	size_t buffer_size	    /* Number of bytes in buffer */
 108:../../../mod/wireless/wireless.c **** 	)
 109:../../../mod/wireless/wireless.c **** {
  84              		.loc 1 109 1 is_stmt 1 view -0
  85              		.cfi_startproc
  86              		@ args = 0, pretend = 0, frame = 0
  87              		@ frame_needed = 0, uses_anonymous_args = 0
  88              		.loc 1 109 1 is_stmt 0 view .LVU12
  89 0000 08B5     		push	{r3, lr}
  90              	.LCFI3:
  91              		.cfi_def_cfa_offset 8
  92              		.cfi_offset 3, -8
  93              		.cfi_offset 14, -4
 110:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 111:../../../mod/wireless/wireless.c ****  Local Variables
 112:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 113:../../../mod/wireless/wireless.c **** HAL_StatusTypeDef hal_status;    /* Return codes from HAL */
  94              		.loc 1 113 1 is_stmt 1 view .LVU13
 114:../../../mod/wireless/wireless.c **** uint32_t          timeout;       /* UART transmit timeout */
  95              		.loc 1 114 1 view .LVU14
 115:../../../mod/wireless/wireless.c **** 
 116:../../../mod/wireless/wireless.c **** 
 117:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 118:../../../mod/wireless/wireless.c ****  Initializations 
 119:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 120:../../../mod/wireless/wireless.c **** hal_status = HAL_OK;
  96              		.loc 1 120 1 view .LVU15
  97              	.LVL5:
 121:../../../mod/wireless/wireless.c **** timeout    = RF_POLL_TIMEOUT*buffer_size;
  98              		.loc 1 121 1 view .LVU16
 122:../../../mod/wireless/wireless.c **** 
 123:../../../mod/wireless/wireless.c **** 
 124:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 125:../../../mod/wireless/wireless.c ****  API Function Implementation 
 126:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 127:../../../mod/wireless/wireless.c **** 
 128:../../../mod/wireless/wireless.c **** /* Transmit byte */
 129:../../../mod/wireless/wireless.c **** hal_status = HAL_UART_Transmit( &( XBEE_HUART ),
  99              		.loc 1 129 1 view .LVU17
 100              		.loc 1 129 14 is_stmt 0 view .LVU18
 101 0002 6423     		movs	r3, #100
 102 0004 01FB03F3 		mul	r3, r1, r3
ARM GAS  /tmp/ccPyVOQq.s 			page 5


 103              	.LVL6:
 104              		.loc 1 129 14 view .LVU19
 105 0008 8AB2     		uxth	r2, r1
 106 000a 0146     		mov	r1, r0
 107              	.LVL7:
 108              		.loc 1 129 14 view .LVU20
 109 000c 0248     		ldr	r0, .L9
 110              	.LVL8:
 111              		.loc 1 129 14 view .LVU21
 112 000e FFF7FEFF 		bl	HAL_UART_Transmit
 113              	.LVL9:
 130:../../../mod/wireless/wireless.c ****                                 tx_buffer_ptr  , 
 131:../../../mod/wireless/wireless.c ****                                 buffer_size    , 
 132:../../../mod/wireless/wireless.c ****                                 timeout );
 133:../../../mod/wireless/wireless.c **** 
 134:../../../mod/wireless/wireless.c **** /* Return HAL status */
 135:../../../mod/wireless/wireless.c **** if ( hal_status != HAL_OK )
 114              		.loc 1 135 1 is_stmt 1 view .LVU22
 115              		.loc 1 135 4 is_stmt 0 view .LVU23
 116 0012 00B1     		cbz	r0, .L7
 136:../../../mod/wireless/wireless.c **** 	{
 137:../../../mod/wireless/wireless.c **** 	return RF_ERROR;
 117              		.loc 1 137 9 view .LVU24
 118 0014 0120     		movs	r0, #1
 119              	.L7:
 138:../../../mod/wireless/wireless.c **** 	}
 139:../../../mod/wireless/wireless.c **** else
 140:../../../mod/wireless/wireless.c **** 	{
 141:../../../mod/wireless/wireless.c **** 	return RF_OK;
 142:../../../mod/wireless/wireless.c **** 	}
 143:../../../mod/wireless/wireless.c **** 
 144:../../../mod/wireless/wireless.c **** } /* rf_xbee_transmit */
 120              		.loc 1 144 1 view .LVU25
 121 0016 08BD     		pop	{r3, pc}
 122              	.L10:
 123              		.align	2
 124              	.L9:
 125 0018 00000000 		.word	huart4
 126              		.cfi_endproc
 127              	.LFE334:
 129              		.section	.text.rf_xbee_receive_byte,"ax",%progbits
 130              		.align	1
 131              		.global	rf_xbee_receive_byte
 132              		.syntax unified
 133              		.thumb
 134              		.thumb_func
 136              	rf_xbee_receive_byte:
 137              	.LVL10:
 138              	.LFB335:
 145:../../../mod/wireless/wireless.c **** 
 146:../../../mod/wireless/wireless.c **** 
 147:../../../mod/wireless/wireless.c **** /*******************************************************************************
 148:../../../mod/wireless/wireless.c **** *                                                                              *
 149:../../../mod/wireless/wireless.c **** * PROCEDURE:                                                                   *
 150:../../../mod/wireless/wireless.c **** * 		rf_xbee_receieve_byte                                                  *
 151:../../../mod/wireless/wireless.c **** *                                                                              *
 152:../../../mod/wireless/wireless.c **** * DESCRIPTION:                                                                 *
ARM GAS  /tmp/ccPyVOQq.s 			page 6


 153:../../../mod/wireless/wireless.c **** * 		Receives a byte from the xbee module                                   *
 154:../../../mod/wireless/wireless.c **** *                                                                              *
 155:../../../mod/wireless/wireless.c **** *******************************************************************************/
 156:../../../mod/wireless/wireless.c **** RF_STATUS rf_xbee_receive_byte 
 157:../../../mod/wireless/wireless.c **** 	(
 158:../../../mod/wireless/wireless.c **** 	uint8_t* p_rx_byte	
 159:../../../mod/wireless/wireless.c **** 	)
 160:../../../mod/wireless/wireless.c **** {
 139              		.loc 1 160 1 is_stmt 1 view -0
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 0, uses_anonymous_args = 0
 143              		.loc 1 160 1 is_stmt 0 view .LVU27
 144 0000 08B5     		push	{r3, lr}
 145              	.LCFI4:
 146              		.cfi_def_cfa_offset 8
 147              		.cfi_offset 3, -8
 148              		.cfi_offset 14, -4
 149 0002 0146     		mov	r1, r0
 161:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 162:../../../mod/wireless/wireless.c ****  Local Variables
 163:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 164:../../../mod/wireless/wireless.c **** HAL_StatusTypeDef hal_status;
 150              		.loc 1 164 1 is_stmt 1 view .LVU28
 165:../../../mod/wireless/wireless.c **** 
 166:../../../mod/wireless/wireless.c **** 
 167:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 168:../../../mod/wireless/wireless.c ****  Initializations
 169:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 170:../../../mod/wireless/wireless.c **** hal_status = HAL_OK;
 151              		.loc 1 170 1 view .LVU29
 152              	.LVL11:
 171:../../../mod/wireless/wireless.c **** 
 172:../../../mod/wireless/wireless.c **** 
 173:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 174:../../../mod/wireless/wireless.c ****  API Function Implementation 
 175:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 176:../../../mod/wireless/wireless.c **** 
 177:../../../mod/wireless/wireless.c **** /* Set the Ready to Send Signal */
 178:../../../mod/wireless/wireless.c **** #ifdef GROUND_STATION
 179:../../../mod/wireless/wireless.c **** HAL_GPIO_WritePin( XBEE_RTS_GPIO_PORT, XBEE_RTS_PIN, GPIO_PIN_RESET );
 180:../../../mod/wireless/wireless.c **** #endif
 181:../../../mod/wireless/wireless.c **** 
 182:../../../mod/wireless/wireless.c **** /* Receive byte */
 183:../../../mod/wireless/wireless.c **** hal_status = HAL_UART_Receive( &( XBEE_HUART )  ,
 153              		.loc 1 183 1 view .LVU30
 154              		.loc 1 183 14 is_stmt 0 view .LVU31
 155 0004 6423     		movs	r3, #100
 156 0006 0122     		movs	r2, #1
 157 0008 0548     		ldr	r0, .L15
 158              	.LVL12:
 159              		.loc 1 183 14 view .LVU32
 160 000a FFF7FEFF 		bl	HAL_UART_Receive
 161              	.LVL13:
 184:../../../mod/wireless/wireless.c ****                                p_rx_byte        , 
 185:../../../mod/wireless/wireless.c ****                                sizeof( uint8_t ), 
 186:../../../mod/wireless/wireless.c ****                                RF_POLL_TIMEOUT );
ARM GAS  /tmp/ccPyVOQq.s 			page 7


 187:../../../mod/wireless/wireless.c **** 
 188:../../../mod/wireless/wireless.c **** /* Reset the Read to Send signal */
 189:../../../mod/wireless/wireless.c **** #ifdef GROUND_STATION
 190:../../../mod/wireless/wireless.c **** HAL_GPIO_WritePin( XBEE_RTS_GPIO_PORT, XBEE_RTS_PIN, GPIO_PIN_SET );
 191:../../../mod/wireless/wireless.c **** #endif
 192:../../../mod/wireless/wireless.c **** 
 193:../../../mod/wireless/wireless.c **** /* Return HAL status */
 194:../../../mod/wireless/wireless.c **** switch ( hal_status )
 162              		.loc 1 194 1 is_stmt 1 view .LVU33
 163 000e 0346     		mov	r3, r0
 164 0010 10B1     		cbz	r0, .L12
 165 0012 0328     		cmp	r0, #3
 166 0014 02D1     		bne	.L13
 167 0016 0223     		movs	r3, #2
 168              	.L12:
 195:../../../mod/wireless/wireless.c **** 	{
 196:../../../mod/wireless/wireless.c **** 	case HAL_TIMEOUT:
 197:../../../mod/wireless/wireless.c **** 		{
 198:../../../mod/wireless/wireless.c **** 		return RF_TIMEOUT;
 199:../../../mod/wireless/wireless.c **** 		}
 200:../../../mod/wireless/wireless.c **** 	case HAL_OK:
 201:../../../mod/wireless/wireless.c **** 		{
 202:../../../mod/wireless/wireless.c **** 		return RF_OK;
 203:../../../mod/wireless/wireless.c **** 		}
 204:../../../mod/wireless/wireless.c **** 	default:
 205:../../../mod/wireless/wireless.c **** 		{
 206:../../../mod/wireless/wireless.c **** 		return RF_ERROR;
 207:../../../mod/wireless/wireless.c ****         }
 208:../../../mod/wireless/wireless.c **** 	}
 209:../../../mod/wireless/wireless.c **** } /* rf_xbee_receive_byte */
 169              		.loc 1 209 1 is_stmt 0 view .LVU34
 170 0018 1846     		mov	r0, r3
 171              	.LVL14:
 172              		.loc 1 209 1 view .LVU35
 173 001a 08BD     		pop	{r3, pc}
 174              	.LVL15:
 175              	.L13:
 206:../../../mod/wireless/wireless.c ****         }
 176              		.loc 1 206 10 view .LVU36
 177 001c 0123     		movs	r3, #1
 178 001e FBE7     		b	.L12
 179              	.L16:
 180              		.align	2
 181              	.L15:
 182 0020 00000000 		.word	huart4
 183              		.cfi_endproc
 184              	.LFE335:
 186              		.section	.text.rf_xbee_receive,"ax",%progbits
 187              		.align	1
 188              		.global	rf_xbee_receive
 189              		.syntax unified
 190              		.thumb
 191              		.thumb_func
 193              	rf_xbee_receive:
 194              	.LVL16:
 195              	.LFB336:
 210:../../../mod/wireless/wireless.c **** 
ARM GAS  /tmp/ccPyVOQq.s 			page 8


 211:../../../mod/wireless/wireless.c **** 
 212:../../../mod/wireless/wireless.c **** /*******************************************************************************
 213:../../../mod/wireless/wireless.c **** *                                                                              *
 214:../../../mod/wireless/wireless.c **** * PROCEDURE:                                                                   *
 215:../../../mod/wireless/wireless.c **** * 		rf_xbee_receive                                                        *
 216:../../../mod/wireless/wireless.c **** *                                                                              *
 217:../../../mod/wireless/wireless.c **** * DESCRIPTION:                                                                 *
 218:../../../mod/wireless/wireless.c **** * 		Receives data from the xbee module and outputs to a buffer             *
 219:../../../mod/wireless/wireless.c **** *                                                                              *
 220:../../../mod/wireless/wireless.c **** *******************************************************************************/
 221:../../../mod/wireless/wireless.c **** RF_STATUS rf_xbee_receive
 222:../../../mod/wireless/wireless.c **** 	(
 223:../../../mod/wireless/wireless.c **** 	void*  rx_buffer_ptr,   /* Pointer to output data buffer */	
 224:../../../mod/wireless/wireless.c **** 	size_t rx_buffer_size   /* Number of bytes to recevie    */
 225:../../../mod/wireless/wireless.c **** 	)
 226:../../../mod/wireless/wireless.c **** {
 196              		.loc 1 226 1 is_stmt 1 view -0
 197              		.cfi_startproc
 198              		@ args = 0, pretend = 0, frame = 0
 199              		@ frame_needed = 0, uses_anonymous_args = 0
 200              		.loc 1 226 1 is_stmt 0 view .LVU38
 201 0000 08B5     		push	{r3, lr}
 202              	.LCFI5:
 203              		.cfi_def_cfa_offset 8
 204              		.cfi_offset 3, -8
 205              		.cfi_offset 14, -4
 227:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 228:../../../mod/wireless/wireless.c ****  Local Variables
 229:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 230:../../../mod/wireless/wireless.c **** HAL_StatusTypeDef hal_status;    /* Return codes from HAL */
 206              		.loc 1 230 1 is_stmt 1 view .LVU39
 231:../../../mod/wireless/wireless.c **** uint32_t          timeout;       /* UART receive timeout  */
 207              		.loc 1 231 1 view .LVU40
 232:../../../mod/wireless/wireless.c **** 
 233:../../../mod/wireless/wireless.c **** 
 234:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 235:../../../mod/wireless/wireless.c ****  Initialization 
 236:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 237:../../../mod/wireless/wireless.c **** hal_status = HAL_OK;
 208              		.loc 1 237 1 view .LVU41
 209              	.LVL17:
 238:../../../mod/wireless/wireless.c **** timeout    = rx_buffer_size*RF_POLL_TIMEOUT;
 210              		.loc 1 238 1 view .LVU42
 211              		.loc 1 238 12 is_stmt 0 view .LVU43
 212 0002 6423     		movs	r3, #100
 213 0004 03FB01F2 		mul	r2, r3, r1
 214              	.LVL18:
 239:../../../mod/wireless/wireless.c **** 
 240:../../../mod/wireless/wireless.c **** 
 241:../../../mod/wireless/wireless.c **** /*------------------------------------------------------------------------------
 242:../../../mod/wireless/wireless.c ****  API Function Implementation 
 243:../../../mod/wireless/wireless.c **** ------------------------------------------------------------------------------*/
 244:../../../mod/wireless/wireless.c **** 
 245:../../../mod/wireless/wireless.c **** /* Receive data */
 246:../../../mod/wireless/wireless.c **** hal_status = HAL_UART_Receive( &( XBEE_HUART ),
 215              		.loc 1 246 1 is_stmt 1 view .LVU44
 216              		.loc 1 246 14 is_stmt 0 view .LVU45
ARM GAS  /tmp/ccPyVOQq.s 			page 9


 217 0008 92B2     		uxth	r2, r2
 218              	.LVL19:
 219              		.loc 1 246 14 view .LVU46
 220 000a 0146     		mov	r1, r0
 221              	.LVL20:
 222              		.loc 1 246 14 view .LVU47
 223 000c 0548     		ldr	r0, .L21
 224              	.LVL21:
 225              		.loc 1 246 14 view .LVU48
 226 000e FFF7FEFF 		bl	HAL_UART_Receive
 227              	.LVL22:
 247:../../../mod/wireless/wireless.c ****                                rx_buffer_ptr  , 
 248:../../../mod/wireless/wireless.c ****                                timeout        , 
 249:../../../mod/wireless/wireless.c ****                                RF_POLL_TIMEOUT );
 250:../../../mod/wireless/wireless.c **** 
 251:../../../mod/wireless/wireless.c **** /* Return HAL status */
 252:../../../mod/wireless/wireless.c **** switch ( hal_status )
 228              		.loc 1 252 1 is_stmt 1 view .LVU49
 229 0012 0346     		mov	r3, r0
 230 0014 10B1     		cbz	r0, .L18
 231 0016 0328     		cmp	r0, #3
 232 0018 02D1     		bne	.L19
 233 001a 0223     		movs	r3, #2
 234              	.L18:
 253:../../../mod/wireless/wireless.c **** 	{
 254:../../../mod/wireless/wireless.c **** 	case HAL_TIMEOUT:
 255:../../../mod/wireless/wireless.c **** 		{
 256:../../../mod/wireless/wireless.c **** 		return RF_TIMEOUT;
 257:../../../mod/wireless/wireless.c **** 		}
 258:../../../mod/wireless/wireless.c **** 	case HAL_OK:
 259:../../../mod/wireless/wireless.c **** 		{
 260:../../../mod/wireless/wireless.c **** 		return RF_OK;
 261:../../../mod/wireless/wireless.c **** 		}
 262:../../../mod/wireless/wireless.c **** 	default:
 263:../../../mod/wireless/wireless.c **** 		{
 264:../../../mod/wireless/wireless.c **** 		return RF_ERROR;
 265:../../../mod/wireless/wireless.c ****         }
 266:../../../mod/wireless/wireless.c **** 	}
 267:../../../mod/wireless/wireless.c **** } /* rf_xbee_receive */
 235              		.loc 1 267 1 is_stmt 0 view .LVU50
 236 001c 1846     		mov	r0, r3
 237              	.LVL23:
 238              		.loc 1 267 1 view .LVU51
 239 001e 08BD     		pop	{r3, pc}
 240              	.LVL24:
 241              	.L19:
 264:../../../mod/wireless/wireless.c ****         }
 242              		.loc 1 264 10 view .LVU52
 243 0020 0123     		movs	r3, #1
 244 0022 FBE7     		b	.L18
 245              	.L22:
 246              		.align	2
 247              	.L21:
 248 0024 00000000 		.word	huart4
 249              		.cfi_endproc
 250              	.LFE336:
 252              		.text
ARM GAS  /tmp/ccPyVOQq.s 			page 10


 253              	.Letext0:
 254              		.file 2 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 255              		.file 3 "../../../lib/Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h750xx.h"
 256              		.file 4 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stddef.h"
 257              		.file 5 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 258              		.file 6 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 259              		.file 7 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 260              		.file 8 "../../../mod/wireless/wireless.h"
 261              		.file 9 "../../../lib/sdr_pin_defines_L0002.h"
ARM GAS  /tmp/ccPyVOQq.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 wireless.c
     /tmp/ccPyVOQq.s:20     .text.rf_xbee_transmit_byte:0000000000000000 $t
     /tmp/ccPyVOQq.s:26     .text.rf_xbee_transmit_byte:0000000000000000 rf_xbee_transmit_byte
     /tmp/ccPyVOQq.s:70     .text.rf_xbee_transmit_byte:0000000000000020 $d
     /tmp/ccPyVOQq.s:75     .text.rf_xbee_transmit:0000000000000000 $t
     /tmp/ccPyVOQq.s:81     .text.rf_xbee_transmit:0000000000000000 rf_xbee_transmit
     /tmp/ccPyVOQq.s:125    .text.rf_xbee_transmit:0000000000000018 $d
     /tmp/ccPyVOQq.s:130    .text.rf_xbee_receive_byte:0000000000000000 $t
     /tmp/ccPyVOQq.s:136    .text.rf_xbee_receive_byte:0000000000000000 rf_xbee_receive_byte
     /tmp/ccPyVOQq.s:182    .text.rf_xbee_receive_byte:0000000000000020 $d
     /tmp/ccPyVOQq.s:187    .text.rf_xbee_receive:0000000000000000 $t
     /tmp/ccPyVOQq.s:193    .text.rf_xbee_receive:0000000000000000 rf_xbee_receive
     /tmp/ccPyVOQq.s:248    .text.rf_xbee_receive:0000000000000024 $d

UNDEFINED SYMBOLS
HAL_UART_Transmit
huart4
HAL_UART_Receive
