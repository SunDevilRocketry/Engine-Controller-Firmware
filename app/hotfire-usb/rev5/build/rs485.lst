ARM GAS  /tmp/cclvfRnY.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"rs485.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "../../../mod/rs485/rs485.c"
  19              		.section	.text.rs485_transmit_byte,"ax",%progbits
  20              		.align	1
  21              		.global	rs485_transmit_byte
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	rs485_transmit_byte:
  27              	.LVL0:
  28              	.LFB333:
   1:../../../mod/rs485/rs485.c **** /*******************************************************************************
   2:../../../mod/rs485/rs485.c **** *
   3:../../../mod/rs485/rs485.c **** * FILE: 
   4:../../../mod/rs485/rs485.c **** * 		rs485.c
   5:../../../mod/rs485/rs485.c **** *
   6:../../../mod/rs485/rs485.c **** * DESCRIPTION: 
   7:../../../mod/rs485/rs485.c **** * 		Contains API functions to transmit data over RS485 
   8:../../../mod/rs485/rs485.c **** *
   9:../../../mod/rs485/rs485.c **** *******************************************************************************/
  10:../../../mod/rs485/rs485.c **** 
  11:../../../mod/rs485/rs485.c **** 
  12:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
  13:../../../mod/rs485/rs485.c ****  Standard Includes                                                                     
  14:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
  15:../../../mod/rs485/rs485.c **** #if defined( GROUND_STATION )
  16:../../../mod/rs485/rs485.c **** 	#include "sdr_pin_defines_A0005.h"
  17:../../../mod/rs485/rs485.c **** #elif defined( ENGINE_CONTROLLER )
  18:../../../mod/rs485/rs485.c **** 	#include "sdr_pin_defines_L0002.h"
  19:../../../mod/rs485/rs485.c **** #endif
  20:../../../mod/rs485/rs485.c **** 
  21:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
  22:../../../mod/rs485/rs485.c ****  Project Includes                                                                     
  23:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
  24:../../../mod/rs485/rs485.c **** #include "main.h"
  25:../../../mod/rs485/rs485.c **** #include "rs485.h"
  26:../../../mod/rs485/rs485.c **** 
  27:../../../mod/rs485/rs485.c **** 
  28:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
  29:../../../mod/rs485/rs485.c **** Global Variables                                                                  
  30:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
ARM GAS  /tmp/cclvfRnY.s 			page 2


  31:../../../mod/rs485/rs485.c **** 
  32:../../../mod/rs485/rs485.c **** 
  33:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
  34:../../../mod/rs485/rs485.c ****  Procedures 
  35:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
  36:../../../mod/rs485/rs485.c **** 
  37:../../../mod/rs485/rs485.c **** 
  38:../../../mod/rs485/rs485.c **** /*******************************************************************************
  39:../../../mod/rs485/rs485.c **** *                                                                              *
  40:../../../mod/rs485/rs485.c **** * PROCEDURE:                                                                   *
  41:../../../mod/rs485/rs485.c **** * 		rs485_transmit_byte                                                    *
  42:../../../mod/rs485/rs485.c **** *                                                                              *
  43:../../../mod/rs485/rs485.c **** * DESCRIPTION:                                                                 *
  44:../../../mod/rs485/rs485.c **** * 		transmits a byte over RS485                                            *
  45:../../../mod/rs485/rs485.c **** *                                                                              *
  46:../../../mod/rs485/rs485.c **** *******************************************************************************/
  47:../../../mod/rs485/rs485.c **** RS485_STATUS rs485_transmit_byte 
  48:../../../mod/rs485/rs485.c **** 	(
  49:../../../mod/rs485/rs485.c ****     uint8_t tx_byte	
  50:../../../mod/rs485/rs485.c **** 	)
  51:../../../mod/rs485/rs485.c **** {
  29              		.loc 1 51 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 51 1 is_stmt 0 view .LVU1
  34 0000 00B5     		push	{lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 4
  37              		.cfi_offset 14, -4
  38 0002 83B0     		sub	sp, sp, #12
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 16
  41 0004 8DF80700 		strb	r0, [sp, #7]
  52:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
  53:../../../mod/rs485/rs485.c ****  Local Variables
  54:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
  55:../../../mod/rs485/rs485.c **** HAL_StatusTypeDef hal_status;    /* Return codes from HAL */
  42              		.loc 1 55 1 is_stmt 1 view .LVU2
  56:../../../mod/rs485/rs485.c **** 
  57:../../../mod/rs485/rs485.c **** 
  58:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
  59:../../../mod/rs485/rs485.c ****  Initializations 
  60:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
  61:../../../mod/rs485/rs485.c **** hal_status = HAL_OK;
  43              		.loc 1 61 1 view .LVU3
  44              	.LVL1:
  62:../../../mod/rs485/rs485.c **** 
  63:../../../mod/rs485/rs485.c **** 
  64:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
  65:../../../mod/rs485/rs485.c ****  API Function Implementation 
  66:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
  67:../../../mod/rs485/rs485.c **** 
  68:../../../mod/rs485/rs485.c **** /* Transmit byte */
  69:../../../mod/rs485/rs485.c **** hal_status = HAL_UART_Transmit( &( RS485_HUART  ),
  45              		.loc 1 69 1 view .LVU4
  46              		.loc 1 69 14 is_stmt 0 view .LVU5
ARM GAS  /tmp/cclvfRnY.s 			page 3


  47 0008 0A23     		movs	r3, #10
  48 000a 0122     		movs	r2, #1
  49 000c 0DF10701 		add	r1, sp, #7
  50 0010 0348     		ldr	r0, .L4
  51              	.LVL2:
  52              		.loc 1 69 14 view .LVU6
  53 0012 FFF7FEFF 		bl	HAL_UART_Transmit
  54              	.LVL3:
  70:../../../mod/rs485/rs485.c ****                                 &tx_byte         , 
  71:../../../mod/rs485/rs485.c ****                                 sizeof( tx_byte ), 
  72:../../../mod/rs485/rs485.c ****                                 HAL_DEFAULT_TIMEOUT );
  73:../../../mod/rs485/rs485.c **** 
  74:../../../mod/rs485/rs485.c **** /* Return HAL status */
  75:../../../mod/rs485/rs485.c **** if ( hal_status != HAL_OK )
  55              		.loc 1 75 1 is_stmt 1 view .LVU7
  56              		.loc 1 75 4 is_stmt 0 view .LVU8
  57 0016 00B1     		cbz	r0, .L2
  76:../../../mod/rs485/rs485.c **** 	{
  77:../../../mod/rs485/rs485.c **** 	return RS485_ERROR;
  58              		.loc 1 77 9 view .LVU9
  59 0018 0120     		movs	r0, #1
  60              	.L2:
  78:../../../mod/rs485/rs485.c **** 	}
  79:../../../mod/rs485/rs485.c **** else
  80:../../../mod/rs485/rs485.c **** 	{
  81:../../../mod/rs485/rs485.c **** 	return RS485_OK;
  82:../../../mod/rs485/rs485.c **** 	}
  83:../../../mod/rs485/rs485.c **** } /* rs485_transmit_byte */
  61              		.loc 1 83 1 view .LVU10
  62 001a 03B0     		add	sp, sp, #12
  63              	.LCFI2:
  64              		.cfi_def_cfa_offset 4
  65              		@ sp needed
  66 001c 5DF804FB 		ldr	pc, [sp], #4
  67              	.L5:
  68              		.align	2
  69              	.L4:
  70 0020 00000000 		.word	huart4
  71              		.cfi_endproc
  72              	.LFE333:
  74              		.section	.text.rs485_transmit,"ax",%progbits
  75              		.align	1
  76              		.global	rs485_transmit
  77              		.syntax unified
  78              		.thumb
  79              		.thumb_func
  81              	rs485_transmit:
  82              	.LVL4:
  83              	.LFB334:
  84:../../../mod/rs485/rs485.c **** 
  85:../../../mod/rs485/rs485.c **** 
  86:../../../mod/rs485/rs485.c **** /*******************************************************************************
  87:../../../mod/rs485/rs485.c **** *                                                                              *
  88:../../../mod/rs485/rs485.c **** * PROCEDURE:                                                                   *
  89:../../../mod/rs485/rs485.c **** * 		rs485_transmit                                                         *
  90:../../../mod/rs485/rs485.c **** *                                                                              *
  91:../../../mod/rs485/rs485.c **** * DESCRIPTION:                                                                 *
ARM GAS  /tmp/cclvfRnY.s 			page 4


  92:../../../mod/rs485/rs485.c **** * 		transmits a buffer of bytes over RS485                                 *
  93:../../../mod/rs485/rs485.c **** *                                                                              *
  94:../../../mod/rs485/rs485.c **** *******************************************************************************/
  95:../../../mod/rs485/rs485.c **** RS485_STATUS rs485_transmit
  96:../../../mod/rs485/rs485.c **** 	(
  97:../../../mod/rs485/rs485.c ****     void*    tx_buffer_ptr,   /* Pointer to buffer data    */
  98:../../../mod/rs485/rs485.c **** 	size_t   buffer_size  ,   /* Number of bytes in buffer */
  99:../../../mod/rs485/rs485.c **** 	uint32_t timeout          /* Timeout in ms             */
 100:../../../mod/rs485/rs485.c **** 	)
 101:../../../mod/rs485/rs485.c **** {
  84              		.loc 1 101 1 is_stmt 1 view -0
  85              		.cfi_startproc
  86              		@ args = 0, pretend = 0, frame = 0
  87              		@ frame_needed = 0, uses_anonymous_args = 0
  88              		.loc 1 101 1 is_stmt 0 view .LVU12
  89 0000 08B5     		push	{r3, lr}
  90              	.LCFI3:
  91              		.cfi_def_cfa_offset 8
  92              		.cfi_offset 3, -8
  93              		.cfi_offset 14, -4
  94 0002 1346     		mov	r3, r2
 102:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 103:../../../mod/rs485/rs485.c ****  Local Variables
 104:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 105:../../../mod/rs485/rs485.c **** HAL_StatusTypeDef hal_status;    /* Return codes from HAL */
  95              		.loc 1 105 1 is_stmt 1 view .LVU13
 106:../../../mod/rs485/rs485.c **** 
 107:../../../mod/rs485/rs485.c **** 
 108:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 109:../../../mod/rs485/rs485.c ****  Initializations 
 110:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 111:../../../mod/rs485/rs485.c **** hal_status = HAL_OK;
  96              		.loc 1 111 1 view .LVU14
  97              	.LVL5:
 112:../../../mod/rs485/rs485.c **** 
 113:../../../mod/rs485/rs485.c **** 
 114:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 115:../../../mod/rs485/rs485.c ****  API Function Implementation 
 116:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 117:../../../mod/rs485/rs485.c **** 
 118:../../../mod/rs485/rs485.c **** /* Transmit byte */
 119:../../../mod/rs485/rs485.c **** hal_status = HAL_UART_Transmit( &( RS485_HUART ),
  98              		.loc 1 119 1 view .LVU15
  99              		.loc 1 119 14 is_stmt 0 view .LVU16
 100 0004 8AB2     		uxth	r2, r1
 101              	.LVL6:
 102              		.loc 1 119 14 view .LVU17
 103 0006 0146     		mov	r1, r0
 104              	.LVL7:
 105              		.loc 1 119 14 view .LVU18
 106 0008 0248     		ldr	r0, .L9
 107              	.LVL8:
 108              		.loc 1 119 14 view .LVU19
 109 000a FFF7FEFF 		bl	HAL_UART_Transmit
 110              	.LVL9:
 120:../../../mod/rs485/rs485.c ****                                 tx_buffer_ptr  , 
 121:../../../mod/rs485/rs485.c ****                                 buffer_size    , 
ARM GAS  /tmp/cclvfRnY.s 			page 5


 122:../../../mod/rs485/rs485.c ****                                 timeout );
 123:../../../mod/rs485/rs485.c **** 
 124:../../../mod/rs485/rs485.c **** /* Return HAL status */
 125:../../../mod/rs485/rs485.c **** if ( hal_status != HAL_OK )
 111              		.loc 1 125 1 is_stmt 1 view .LVU20
 112              		.loc 1 125 4 is_stmt 0 view .LVU21
 113 000e 00B1     		cbz	r0, .L7
 126:../../../mod/rs485/rs485.c **** 	{
 127:../../../mod/rs485/rs485.c **** 	return RS485_ERROR;
 114              		.loc 1 127 9 view .LVU22
 115 0010 0120     		movs	r0, #1
 116              	.L7:
 128:../../../mod/rs485/rs485.c **** 	}
 129:../../../mod/rs485/rs485.c **** else
 130:../../../mod/rs485/rs485.c **** 	{
 131:../../../mod/rs485/rs485.c **** 	return RS485_OK;
 132:../../../mod/rs485/rs485.c **** 	}
 133:../../../mod/rs485/rs485.c **** 
 134:../../../mod/rs485/rs485.c **** } /* rs485_transmit */
 117              		.loc 1 134 1 view .LVU23
 118 0012 08BD     		pop	{r3, pc}
 119              	.L10:
 120              		.align	2
 121              	.L9:
 122 0014 00000000 		.word	huart4
 123              		.cfi_endproc
 124              	.LFE334:
 126              		.section	.text.rs485_receive_byte,"ax",%progbits
 127              		.align	1
 128              		.global	rs485_receive_byte
 129              		.syntax unified
 130              		.thumb
 131              		.thumb_func
 133              	rs485_receive_byte:
 134              	.LVL10:
 135              	.LFB335:
 135:../../../mod/rs485/rs485.c **** 
 136:../../../mod/rs485/rs485.c **** 
 137:../../../mod/rs485/rs485.c **** /*******************************************************************************
 138:../../../mod/rs485/rs485.c **** *                                                                              *
 139:../../../mod/rs485/rs485.c **** * PROCEDURE:                                                                   *
 140:../../../mod/rs485/rs485.c **** * 		rs485_receieve_byte                                                    *
 141:../../../mod/rs485/rs485.c **** *                                                                              *
 142:../../../mod/rs485/rs485.c **** * DESCRIPTION:                                                                 *
 143:../../../mod/rs485/rs485.c **** * 		Receives a byte from the RS485 interface                               *
 144:../../../mod/rs485/rs485.c **** *                                                                              *
 145:../../../mod/rs485/rs485.c **** *******************************************************************************/
 146:../../../mod/rs485/rs485.c **** RS485_STATUS rs485_receive_byte 
 147:../../../mod/rs485/rs485.c **** 	(
 148:../../../mod/rs485/rs485.c **** 	uint8_t* p_rx_byte	
 149:../../../mod/rs485/rs485.c **** 	)
 150:../../../mod/rs485/rs485.c **** {
 136              		.loc 1 150 1 is_stmt 1 view -0
 137              		.cfi_startproc
 138              		@ args = 0, pretend = 0, frame = 0
 139              		@ frame_needed = 0, uses_anonymous_args = 0
 140              		.loc 1 150 1 is_stmt 0 view .LVU25
ARM GAS  /tmp/cclvfRnY.s 			page 6


 141 0000 08B5     		push	{r3, lr}
 142              	.LCFI4:
 143              		.cfi_def_cfa_offset 8
 144              		.cfi_offset 3, -8
 145              		.cfi_offset 14, -4
 146 0002 0146     		mov	r1, r0
 151:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 152:../../../mod/rs485/rs485.c ****  Local Variables
 153:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 154:../../../mod/rs485/rs485.c **** HAL_StatusTypeDef hal_status;
 147              		.loc 1 154 1 is_stmt 1 view .LVU26
 155:../../../mod/rs485/rs485.c **** 
 156:../../../mod/rs485/rs485.c **** 
 157:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 158:../../../mod/rs485/rs485.c ****  Initializations
 159:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 160:../../../mod/rs485/rs485.c **** hal_status = HAL_OK;
 148              		.loc 1 160 1 view .LVU27
 149              	.LVL11:
 161:../../../mod/rs485/rs485.c **** 
 162:../../../mod/rs485/rs485.c **** 
 163:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 164:../../../mod/rs485/rs485.c ****  API Function Implementation 
 165:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 166:../../../mod/rs485/rs485.c **** 
 167:../../../mod/rs485/rs485.c **** /* Receive byte */
 168:../../../mod/rs485/rs485.c **** hal_status = HAL_UART_Receive( &( RS485_HUART )  ,
 150              		.loc 1 168 1 view .LVU28
 151              		.loc 1 168 14 is_stmt 0 view .LVU29
 152 0004 4FF47A73 		mov	r3, #1000
 153 0008 0122     		movs	r2, #1
 154 000a 0648     		ldr	r0, .L15
 155              	.LVL12:
 156              		.loc 1 168 14 view .LVU30
 157 000c FFF7FEFF 		bl	HAL_UART_Receive
 158              	.LVL13:
 169:../../../mod/rs485/rs485.c ****                                p_rx_byte        , 
 170:../../../mod/rs485/rs485.c ****                                sizeof( uint8_t ), 
 171:../../../mod/rs485/rs485.c ****                                RS485_POLL_TIMEOUT );
 172:../../../mod/rs485/rs485.c **** 
 173:../../../mod/rs485/rs485.c **** /* Return HAL status */
 174:../../../mod/rs485/rs485.c **** switch ( hal_status )
 159              		.loc 1 174 1 is_stmt 1 view .LVU31
 160 0010 0346     		mov	r3, r0
 161 0012 10B1     		cbz	r0, .L12
 162 0014 0328     		cmp	r0, #3
 163 0016 02D1     		bne	.L13
 164 0018 0223     		movs	r3, #2
 165              	.L12:
 175:../../../mod/rs485/rs485.c **** 	{
 176:../../../mod/rs485/rs485.c **** 	case HAL_TIMEOUT:
 177:../../../mod/rs485/rs485.c **** 		{
 178:../../../mod/rs485/rs485.c **** 		return RS485_TIMEOUT;
 179:../../../mod/rs485/rs485.c **** 		}
 180:../../../mod/rs485/rs485.c **** 	case HAL_OK:
 181:../../../mod/rs485/rs485.c **** 		{
 182:../../../mod/rs485/rs485.c **** 		return RS485_OK;
ARM GAS  /tmp/cclvfRnY.s 			page 7


 183:../../../mod/rs485/rs485.c **** 		}
 184:../../../mod/rs485/rs485.c **** 	default:
 185:../../../mod/rs485/rs485.c **** 		{
 186:../../../mod/rs485/rs485.c **** 		return RS485_ERROR;
 187:../../../mod/rs485/rs485.c ****         }
 188:../../../mod/rs485/rs485.c **** 	}
 189:../../../mod/rs485/rs485.c **** } /* rs485_receive_byte */
 166              		.loc 1 189 1 is_stmt 0 view .LVU32
 167 001a 1846     		mov	r0, r3
 168              	.LVL14:
 169              		.loc 1 189 1 view .LVU33
 170 001c 08BD     		pop	{r3, pc}
 171              	.LVL15:
 172              	.L13:
 186:../../../mod/rs485/rs485.c ****         }
 173              		.loc 1 186 10 view .LVU34
 174 001e 0123     		movs	r3, #1
 175 0020 FBE7     		b	.L12
 176              	.L16:
 177 0022 00BF     		.align	2
 178              	.L15:
 179 0024 00000000 		.word	huart4
 180              		.cfi_endproc
 181              	.LFE335:
 183              		.section	.text.rs485_receive,"ax",%progbits
 184              		.align	1
 185              		.global	rs485_receive
 186              		.syntax unified
 187              		.thumb
 188              		.thumb_func
 190              	rs485_receive:
 191              	.LVL16:
 192              	.LFB336:
 190:../../../mod/rs485/rs485.c **** 
 191:../../../mod/rs485/rs485.c **** 
 192:../../../mod/rs485/rs485.c **** /*******************************************************************************
 193:../../../mod/rs485/rs485.c **** *                                                                              *
 194:../../../mod/rs485/rs485.c **** * PROCEDURE:                                                                   *
 195:../../../mod/rs485/rs485.c **** * 		rs485_receive                                                          *
 196:../../../mod/rs485/rs485.c **** *                                                                              *
 197:../../../mod/rs485/rs485.c **** * DESCRIPTION:                                                                 *
 198:../../../mod/rs485/rs485.c **** * 		Receives data from the RS485 interface and outputs to a buffer         *
 199:../../../mod/rs485/rs485.c **** *                                                                              *
 200:../../../mod/rs485/rs485.c **** *******************************************************************************/
 201:../../../mod/rs485/rs485.c **** RS485_STATUS rs485_receive
 202:../../../mod/rs485/rs485.c **** 	(
 203:../../../mod/rs485/rs485.c **** 	void*    rx_buffer_ptr,   /* Pointer to output data buffer */	
 204:../../../mod/rs485/rs485.c **** 	size_t   rx_buffer_size,  /* Number of bytes to recevie    */
 205:../../../mod/rs485/rs485.c **** 	uint32_t timeout          /* Timeout in ms                 */
 206:../../../mod/rs485/rs485.c **** 	)
 207:../../../mod/rs485/rs485.c **** {
 193              		.loc 1 207 1 is_stmt 1 view -0
 194              		.cfi_startproc
 195              		@ args = 0, pretend = 0, frame = 0
 196              		@ frame_needed = 0, uses_anonymous_args = 0
 197              		.loc 1 207 1 is_stmt 0 view .LVU36
 198 0000 08B5     		push	{r3, lr}
ARM GAS  /tmp/cclvfRnY.s 			page 8


 199              	.LCFI5:
 200              		.cfi_def_cfa_offset 8
 201              		.cfi_offset 3, -8
 202              		.cfi_offset 14, -4
 203 0002 1346     		mov	r3, r2
 208:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 209:../../../mod/rs485/rs485.c ****  Local Variables
 210:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 211:../../../mod/rs485/rs485.c **** HAL_StatusTypeDef hal_status;    /* Return codes from HAL */
 204              		.loc 1 211 1 is_stmt 1 view .LVU37
 212:../../../mod/rs485/rs485.c **** 
 213:../../../mod/rs485/rs485.c **** 
 214:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 215:../../../mod/rs485/rs485.c ****  Initialization 
 216:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 217:../../../mod/rs485/rs485.c **** hal_status = HAL_OK;
 205              		.loc 1 217 1 view .LVU38
 206              	.LVL17:
 218:../../../mod/rs485/rs485.c **** 
 219:../../../mod/rs485/rs485.c **** 
 220:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 221:../../../mod/rs485/rs485.c ****  API Function Implementation 
 222:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 223:../../../mod/rs485/rs485.c **** 
 224:../../../mod/rs485/rs485.c **** /* Receive data */
 225:../../../mod/rs485/rs485.c **** hal_status = HAL_UART_Receive( &( RS485_HUART ),
 207              		.loc 1 225 1 view .LVU39
 208              		.loc 1 225 14 is_stmt 0 view .LVU40
 209 0004 8AB2     		uxth	r2, r1
 210              	.LVL18:
 211              		.loc 1 225 14 view .LVU41
 212 0006 0146     		mov	r1, r0
 213              	.LVL19:
 214              		.loc 1 225 14 view .LVU42
 215 0008 0548     		ldr	r0, .L21
 216              	.LVL20:
 217              		.loc 1 225 14 view .LVU43
 218 000a FFF7FEFF 		bl	HAL_UART_Receive
 219              	.LVL21:
 226:../../../mod/rs485/rs485.c ****                                rx_buffer_ptr  , 
 227:../../../mod/rs485/rs485.c ****                                rx_buffer_size , 
 228:../../../mod/rs485/rs485.c ****                                timeout );
 229:../../../mod/rs485/rs485.c **** 
 230:../../../mod/rs485/rs485.c **** /* Return HAL status */
 231:../../../mod/rs485/rs485.c **** switch ( hal_status )
 220              		.loc 1 231 1 is_stmt 1 view .LVU44
 221 000e 0346     		mov	r3, r0
 222 0010 10B1     		cbz	r0, .L18
 223 0012 0328     		cmp	r0, #3
 224 0014 02D1     		bne	.L19
 225 0016 0223     		movs	r3, #2
 226              	.L18:
 232:../../../mod/rs485/rs485.c **** 	{
 233:../../../mod/rs485/rs485.c **** 	case HAL_TIMEOUT:
 234:../../../mod/rs485/rs485.c **** 		{
 235:../../../mod/rs485/rs485.c **** 		return RS485_TIMEOUT;
 236:../../../mod/rs485/rs485.c **** 		}
ARM GAS  /tmp/cclvfRnY.s 			page 9


 237:../../../mod/rs485/rs485.c **** 	case HAL_OK:
 238:../../../mod/rs485/rs485.c **** 		{
 239:../../../mod/rs485/rs485.c **** 		return RS485_OK;
 240:../../../mod/rs485/rs485.c **** 		}
 241:../../../mod/rs485/rs485.c **** 	default:
 242:../../../mod/rs485/rs485.c **** 		{
 243:../../../mod/rs485/rs485.c **** 		return RS485_ERROR;
 244:../../../mod/rs485/rs485.c ****         }
 245:../../../mod/rs485/rs485.c **** 	}
 246:../../../mod/rs485/rs485.c **** } /* rs485_receive */
 227              		.loc 1 246 1 is_stmt 0 view .LVU45
 228 0018 1846     		mov	r0, r3
 229              	.LVL22:
 230              		.loc 1 246 1 view .LVU46
 231 001a 08BD     		pop	{r3, pc}
 232              	.LVL23:
 233              	.L19:
 243:../../../mod/rs485/rs485.c ****         }
 234              		.loc 1 243 10 view .LVU47
 235 001c 0123     		movs	r3, #1
 236 001e FBE7     		b	.L18
 237              	.L22:
 238              		.align	2
 239              	.L21:
 240 0020 00000000 		.word	huart4
 241              		.cfi_endproc
 242              	.LFE336:
 244              		.section	.text.rs485_receive_IT,"ax",%progbits
 245              		.align	1
 246              		.global	rs485_receive_IT
 247              		.syntax unified
 248              		.thumb
 249              		.thumb_func
 251              	rs485_receive_IT:
 252              	.LVL24:
 253              	.LFB337:
 247:../../../mod/rs485/rs485.c **** 
 248:../../../mod/rs485/rs485.c **** 
 249:../../../mod/rs485/rs485.c **** /*******************************************************************************
 250:../../../mod/rs485/rs485.c **** *                                                                              *
 251:../../../mod/rs485/rs485.c **** * PROCEDURE:                                                                   *
 252:../../../mod/rs485/rs485.c **** * 		rs485_receive_IT                                                       *
 253:../../../mod/rs485/rs485.c **** *                                                                              *
 254:../../../mod/rs485/rs485.c **** * DESCRIPTION:                                                                 *
 255:../../../mod/rs485/rs485.c **** * 		Receives data from the RS485 interface in interrupt mode and outputs   * 
 256:../../../mod/rs485/rs485.c **** *       to a buffer                                                            *
 257:../../../mod/rs485/rs485.c **** *                                                                              *
 258:../../../mod/rs485/rs485.c **** *******************************************************************************/
 259:../../../mod/rs485/rs485.c **** RS485_STATUS rs485_receive_IT
 260:../../../mod/rs485/rs485.c **** 	(
 261:../../../mod/rs485/rs485.c **** 	void*    rx_buffer_ptr,   /* Pointer to output data buffer */	
 262:../../../mod/rs485/rs485.c **** 	size_t   rx_buffer_size   /* Number of bytes to recevie    */
 263:../../../mod/rs485/rs485.c **** 	)
 264:../../../mod/rs485/rs485.c **** {
 254              		.loc 1 264 1 is_stmt 1 view -0
 255              		.cfi_startproc
 256              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cclvfRnY.s 			page 10


 257              		@ frame_needed = 0, uses_anonymous_args = 0
 258              		.loc 1 264 1 is_stmt 0 view .LVU49
 259 0000 08B5     		push	{r3, lr}
 260              	.LCFI6:
 261              		.cfi_def_cfa_offset 8
 262              		.cfi_offset 3, -8
 263              		.cfi_offset 14, -4
 265:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 266:../../../mod/rs485/rs485.c ****  Local Variables
 267:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 268:../../../mod/rs485/rs485.c **** HAL_StatusTypeDef hal_status;    /* Return codes from HAL */
 264              		.loc 1 268 1 is_stmt 1 view .LVU50
 269:../../../mod/rs485/rs485.c **** 
 270:../../../mod/rs485/rs485.c **** 
 271:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 272:../../../mod/rs485/rs485.c ****  Initialization 
 273:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 274:../../../mod/rs485/rs485.c **** hal_status = HAL_OK;
 265              		.loc 1 274 1 view .LVU51
 266              	.LVL25:
 275:../../../mod/rs485/rs485.c **** 
 276:../../../mod/rs485/rs485.c **** 
 277:../../../mod/rs485/rs485.c **** /*------------------------------------------------------------------------------
 278:../../../mod/rs485/rs485.c ****  API Function Implementation 
 279:../../../mod/rs485/rs485.c **** ------------------------------------------------------------------------------*/
 280:../../../mod/rs485/rs485.c **** 
 281:../../../mod/rs485/rs485.c **** /* Receive data */
 282:../../../mod/rs485/rs485.c **** hal_status = HAL_UART_Receive_IT( &( RS485_HUART ),
 267              		.loc 1 282 1 view .LVU52
 268              		.loc 1 282 14 is_stmt 0 view .LVU53
 269 0002 8AB2     		uxth	r2, r1
 270 0004 0146     		mov	r1, r0
 271              	.LVL26:
 272              		.loc 1 282 14 view .LVU54
 273 0006 0348     		ldr	r0, .L26
 274              	.LVL27:
 275              		.loc 1 282 14 view .LVU55
 276 0008 FFF7FEFF 		bl	HAL_UART_Receive_IT
 277              	.LVL28:
 283:../../../mod/rs485/rs485.c ****                                   rx_buffer_ptr   , 
 284:../../../mod/rs485/rs485.c ****                                   rx_buffer_size );
 285:../../../mod/rs485/rs485.c **** 
 286:../../../mod/rs485/rs485.c **** /* Return HAL status */
 287:../../../mod/rs485/rs485.c **** if ( hal_status != HAL_OK )
 278              		.loc 1 287 1 is_stmt 1 view .LVU56
 279              		.loc 1 287 4 is_stmt 0 view .LVU57
 280 000c 00B1     		cbz	r0, .L24
 288:../../../mod/rs485/rs485.c **** 	{
 289:../../../mod/rs485/rs485.c **** 	return RS485_ERROR;
 281              		.loc 1 289 9 view .LVU58
 282 000e 0120     		movs	r0, #1
 283              	.L24:
 290:../../../mod/rs485/rs485.c **** 	}
 291:../../../mod/rs485/rs485.c **** else
 292:../../../mod/rs485/rs485.c **** 	{
 293:../../../mod/rs485/rs485.c **** 	return RS485_OK;
 294:../../../mod/rs485/rs485.c **** 	}
ARM GAS  /tmp/cclvfRnY.s 			page 11


 295:../../../mod/rs485/rs485.c **** } /* rs485_receive_IT */
 284              		.loc 1 295 1 view .LVU59
 285 0010 08BD     		pop	{r3, pc}
 286              	.L27:
 287 0012 00BF     		.align	2
 288              	.L26:
 289 0014 00000000 		.word	huart4
 290              		.cfi_endproc
 291              	.LFE337:
 293              		.text
 294              	.Letext0:
 295              		.file 2 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stdint.h"
 296              		.file 3 "../../../lib/Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h750xx.h"
 297              		.file 4 "/usr/lib/gcc/arm-none-eabi/12.2.1/include/stddef.h"
 298              		.file 5 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 299              		.file 6 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 300              		.file 7 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 301              		.file 8 "../../../mod/rs485/rs485.h"
 302              		.file 9 "../../../lib/sdr_pin_defines_L0002.h"
ARM GAS  /tmp/cclvfRnY.s 			page 12


DEFINED SYMBOLS
                            *ABS*:0000000000000000 rs485.c
     /tmp/cclvfRnY.s:20     .text.rs485_transmit_byte:0000000000000000 $t
     /tmp/cclvfRnY.s:26     .text.rs485_transmit_byte:0000000000000000 rs485_transmit_byte
     /tmp/cclvfRnY.s:70     .text.rs485_transmit_byte:0000000000000020 $d
     /tmp/cclvfRnY.s:75     .text.rs485_transmit:0000000000000000 $t
     /tmp/cclvfRnY.s:81     .text.rs485_transmit:0000000000000000 rs485_transmit
     /tmp/cclvfRnY.s:122    .text.rs485_transmit:0000000000000014 $d
     /tmp/cclvfRnY.s:127    .text.rs485_receive_byte:0000000000000000 $t
     /tmp/cclvfRnY.s:133    .text.rs485_receive_byte:0000000000000000 rs485_receive_byte
     /tmp/cclvfRnY.s:179    .text.rs485_receive_byte:0000000000000024 $d
     /tmp/cclvfRnY.s:184    .text.rs485_receive:0000000000000000 $t
     /tmp/cclvfRnY.s:190    .text.rs485_receive:0000000000000000 rs485_receive
     /tmp/cclvfRnY.s:240    .text.rs485_receive:0000000000000020 $d
     /tmp/cclvfRnY.s:245    .text.rs485_receive_IT:0000000000000000 $t
     /tmp/cclvfRnY.s:251    .text.rs485_receive_IT:0000000000000000 rs485_receive_IT
     /tmp/cclvfRnY.s:289    .text.rs485_receive_IT:0000000000000014 $d

UNDEFINED SYMBOLS
HAL_UART_Transmit
huart4
HAL_UART_Receive
HAL_UART_Receive_IT
